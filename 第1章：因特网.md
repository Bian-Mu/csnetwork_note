### 分组交换
端系统又是需要交换报文，长报文会切分城多个分组，经由通信链路和分组交换机传送（交换机分为路由器和链路层交换机）

分组交换的缓存、链路传输速率是不预留的
#### 存储转发传输
定义：交换机向下一节点发送分组的第一个比特时，必须先接收到整个分组

#### 排队时延和分组丢失
对于分组交换机延伸的每一条链路，都有单独的输出缓存（输出队列），用于存储路由器准备发送的分组。当该链路正在传输别的分组时，新分组需要排队，缓存充满时会出现分组丢失。

#### 转发表和路由选择协议
路由器根据分组中的IP地址，向相邻路由器转发该分组。每台路由器都有路由表：将目的地址映射为输出链路。

这个过程也就是：路由器查看分组IP->用目的IP搜索路由表->向指定链路导出


### 电路交换
预留了端系统沿路径通信所需的缓存、链路传输速率。假设两台交换机之间最多4个链接，则每条链路的传输速率将只有1/4

#### 电路交换网络的复用
频分复用FDM：每条链接专用一个特定带宽的频段
时分复用TDM：每条链接在由帧固定划分的某个时隙传输数据


### 分组交换网中的时延、丢包、吞吐量

#### 时延

1. 节点处理：路由器检查分组首部、决定分组的导向
2. 排队：分组在链路上等待传输，受到当前队伍前方的分组数量
3. 传输：分组传输的时间（从路由器中被推出），L为分组长度、R为路由间传输速度，时延为L/R
4. 传播：比特在物理链路的传播时间，取决于物理媒介，接近光速，时延为d/s

##### 排队时延
流量可能是周期性到达链路、也可能是突发性。a为分组到达队列的平均速率（组/秒），如果流量强度a＊L/R>1，则意味着流入的速度大于流出，会导致队列趋向于无限增加；<=1时则受到突发性的影响

##### 端到端时延
需要经过多台路由器

#### 丢包
当后续到达的分组无法进入队列时，将被丢弃

#### 吞吐量
平均吞吐量为F（文件大小）/T bps，链路速率为Ri，则最小时间t＝F/min{Ri}，也就是受到瓶颈链路的影响。

### 协议分层

自顶向下：
1. 应用层：HTTP、SMTP、FTP。报文 （7插入表示层、会话层）
2. 传输/运输层（APP端点之间）：TCP、UDP。报文段
3. 网络层（主机之间）：IP（运输层协议会告诉网络层目的地址）。数据报  （4网际层）
4. 链路层（依照节点，发送网络层的数据报）：帧 （4网络接口层）
5. 物理层：比特  （4网络接口层）

#### 封装

在每一层，一个分组具有两种类型的字段：首部（来自本层）和有效载荷字段（上一层的分组）

#### DDoS
分布式拒绝服务攻击，利用多个源向目标发送大量流量使得主机停止合法链接。

#### 分组嗅探器
被动的接收所有分组记录所有信息

